#===============================================================================
#
# Test sensor
#
# GENERAL DESCRIPTION
#    build script
#
# Copyright (c) 2016-2017 by Qualcomm Technologies, Inc.
# All Rights Reserved.
# Confidential and Proprietary - Qualcomm Technologies, Inc.
#
#-------------------------------------------------------------------------------
#
#  $Id: //components/dev/ssc.slpi/3.0/maansyw.ssc.slpi.3.0.napali_06_11/sensors/test/build/sns_test.scons#1 $
#  $DateTime: 2017/06/11 12:38:13 $
#  $Change: 13546828 $
#
#===============================================================================
Import('env')
import os, inspect

ME = inspect.getfile(inspect.currentframe())
MY_ROOT = os.path.dirname(os.path.dirname(ME))

test_sensor_island_enable = False

if 'SNS_ISLAND_INCLUDE_TEST_SENSOR' in env:
  test_sensor_island_enable = True
  
#-------------------------------------------------------------------------------
# Adds self
#-------------------------------------------------------------------------------
env.AddSSCSU(ME, 
             register_func_name = "sns_test_register", 
             binary_lib = False, 
             add_island_files = test_sensor_island_enable)

#-------------------------------------------------------------------------------
# test sensor configurations
#-------------------------------------------------------------------------------
test_sensors = [
  'SNS_TEST_ACCEL',
  'SNS_TEST_AMD',
  'SNS_TEST_TILT',
  'SNS_TEST_WALK',
  'SNS_TEST_GYRO_CAL',
  'SNS_TEST_GYRO_ROT_MATRIX',
  'SNS_TEST_RESAMPLER',
  'SNS_TEST_GRAVITY',
  'SNS_TEST_SENSOR_TEMP',
  'SNS_TEST_GYRO',
  'SNS_TEST_PRESSURE',
  'SNS_TEST_MAG',
  'SNS_TEST_AMBIENT_LIGHT',
  'SNS_TEST_PROXIMITY',
  'SNS_TEST_HUMIDITY',
  'SNS_TEST_RGB',
  'SNS_TEST_UV',
  'SNS_TEST_HALL',
  'SNS_TEST_AMBIENT_TEMPERATURE',
  'SNS_TEST_GAME_RV',
  'SNS_TEST_HALL',
  'SNS_TEST_RMD',
  'SNS_TEST_PSMD',
  'SNS_TEST_REMOTE_PROC_STATE',
  'SNS_TEST_OEM1',   
]

for s in test_sensors:
  if s in env:
    env.Append(CPPDEFINES = [s])
    break

#-------------------------------------------------------------------------------
# Remove source files
#-------------------------------------------------------------------------------

files_to_remove = [
  'sns_test_amd.h',
  'sns_test_amd.c',
  'sns_test_amd_island.c',
  'sns_test_gyro_cal.h',
  'sns_test_gyro_cal.c',
  'sns_test_gyro_cal_island.c',
  'sns_test_gyro_rot_matrix.h',
  'sns_test_gyro_rot_matrix.c',
  'sns_test_gyro_rot_matrix_island.c',
  'sns_test_resampler.h',
  'sns_test_resampler.c',
  'sns_test_resampler_island.c',
  'sns_test_gravity.h',
  'sns_test_gravity.c',
  'sns_test_gravity_island.c',
  'sns_test_psmd.h',
  'sns_test_psmd.c',
  'sns_test_psmd_island.c',
  'sns_test_tilt.h',
  'sns_test_tilt.c',
  'sns_test_tilt_island.c',
  'sns_test_walk.h',
  'sns_test_walk.c',
  'sns_test_walk_island.c',
  'sns_test_remote_proc_state.h',
  'sns_test_remote_proc_state.c',
  'sns_test_oem1.h',
  'sns_test_oem1.c',  
]

REMOVE_FILES =  env.FindFiles(files_to_remove, MY_ROOT)

env.CleanPack(['CORE_QDSP6_SENSOR_SW'], REMOVE_FILES)
#print '\n'.join(["%s" % i for i in REMOVE_FILES])
#print "-*-*-*-*-*-*-*-*-*-*-*-*"

