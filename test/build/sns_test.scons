#===============================================================================
#
# Test sensor
#
# GENERAL DESCRIPTION
#    build script
#
# Copyright (c) 2016-2017 by Qualcomm Technologies, Inc.
# All Rights Reserved.
# Confidential and Proprietary - Qualcomm Technologies, Inc.
#
#-------------------------------------------------------------------------------
#
#  $Id: //components/rel/ssc.slpi/3.0/sensors/test/build/sns_test.scons#7 $
#  $DateTime: 2017/03/23 18:20:46 $
#  $Change: 12808416 $
#
#===============================================================================
Import('env')
import os, inspect

ME = inspect.getfile(inspect.currentframe())
MY_ROOT = os.path.dirname(os.path.dirname(ME))

#-------------------------------------------------------------------------------
# Adds self
#-------------------------------------------------------------------------------
env.AddSSCSU(ME, register_func_name = "sns_test_register", binary_lib = False)

#-------------------------------------------------------------------------------
# test sensor configurations
#-------------------------------------------------------------------------------
test_sensors = [
  'SNS_TEST_ACCEL',
  'SNS_TEST_GYRO_CAL',
  'SNS_TEST_GYRO_ROT_MATRIX',
  'SNS_TEST_RESAMPLER',
  'SNS_TEST_GRAVITY',
  'SNS_TEST_SENSOR_TEMP',
  'SNS_TEST_GYRO',
  'SNS_TEST_PRESSURE',
  'SNS_TEST_MAG',
  'SNS_TEST_AMBIENT_LIGHT',
  'SNS_TEST_PROXIMITY',
  'SNS_TEST_HUMIDITY',
  'SNS_TEST_RGB',
  'SNS_TEST_UV',
  'SNS_TEST_HALL',
  'SNS_TEST_AMBIENT_TEMPERATURE',
]

for s in test_sensors:
  if s in env:
    env.Append(CPPDEFINES = [s])
    break

#-------------------------------------------------------------------------------
# Remove source files
#-------------------------------------------------------------------------------

files_to_remove = [
  'sns_test_gyro_cal.h',
  'sns_test_gyro_cal.c',
  'sns_test_gyro_rot_matrix.h',
  'sns_test_gyro_rot_matrix.c',
  'sns_test_resampler.h',
  'sns_test_resampler.c',
  'sns_test_gravity.h',
  'sns_test_gravity.c',
]

REMOVE_FILES =  env.FindFiles(files_to_remove, MY_ROOT)

env.CleanPack(['CORE_QDSP6_SENSOR_SW'], REMOVE_FILES)
#print '\n'.join(["%s" % i for i in REMOVE_FILES])
#print "-*-*-*-*-*-*-*-*-*-*-*-*"

